# Instrumented Tests

Instrumented Tests run are run on an Android device, wither emulated or real. They are more accurate than Units but take longer to run.

## Instrumented test setup

Instrumented tests are stored in the `androidTest source set` in `module-name/src/androidTest/java/` which is generated by Android Studio when a new project is created.

The AndroidX Test APIs, allow for running and building instrumented tests:

app's top level `build.gradle`

```gradle
dependencies {
    androidTestImplementation "androidx.test:runner:$androidXTestVersion"
    androidTestImplementation "androidx.test:rules:$androidXTestVersion"
    // Optional -- UI testing with Espresso
    androidTestImplementation "androidx.test.espresso:espresso-core:$espressoVersion"
    // Optional -- UI testing with UI Automator
    androidTestImplementation "androidx.test.uiautomator:uiautomator:$uiAutomatorVersion"
    // Optional -- UI testing with Compose
    androidTestImplementation "androidx.compose.ui:ui-test-junit4:$compose_version"
}
```

To use junit4 classes and have access to its features specify `AndroidJunitRunner` as the default test integration runner by including it in your app's module-level `build.gradle`:

```gradle
android {
    defaultConfig {
        testInstrumentationRunner "androidx.test.runner.AndroidJunitRunner"
    }
}
```

## Instrumented test example

```kotlin
// @RunWith is required only if you use a mix of JUnit3 and JUnit4.
@RunWith(AndroidJUnit4::class)
@SmallTest
class ExampleInstrumentedTest {
    @Test
    fun useAppContext() {
        // Context of the app under test.
        val appContext = InstrumentationRegistry.getInstrumentation().targetContext
        assertEquals("com.example.android.architecture.blueprints.reactive",
            appContext.packageName)
    }
}
```
